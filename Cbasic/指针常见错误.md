# 指针常见错误

### 1.几个重要的结论
1、变量只是内存的标号，指针指向谁就把谁的地址赋给指针。

2、内存的四个区（栈区，堆区，代码区，常量区）

3、在常量区，如果两个字符串一样的话，C++编译器是只分配一块内存，

4、常量区的变量时不允许改变的。

5、如果在被调用函数里面的栈区分配内存，主调函数是不能用的。

### 2.常见错误
```
char *getstring(){
    char *p1="ncd";
    return p1;
}
```
这个是对的，因为“abcd”是放在常量区的，函数调用完成后，常量区的内容还在，所以通过返回的地址是还能访问到“ncd”
```
char *getrstring(){
    char buf[30] ;
    strcpy(buf,"abcde");
    return buf
}
```
这个是不对的，因为这个buf是直接就在栈中分配的内存，当你这个函数调用完成后，你就释放所有的栈中的内容，而被不知道的内容所代替，所以你返回去的地址的内容是已经变了的。
```
int getsum(){
    int num =  0;
    while（*p != 0）{
        num ++;
    }
return num;
}
```
这个就是对的，因为你这个是把这个数返回去了，它的内存被释放后，也会被未知的东西所代替，但是你这里用的是数值，所以它是什么无所谓。
```
int *p = "faf";
*p = 'a';
这个是错的，因为在常量区是不能被改变的
int  *q= null;
*q = 'a';
这个也是错的，因为你根本不知道*q指向的时哪里？万一是系统的哪呢？
```
